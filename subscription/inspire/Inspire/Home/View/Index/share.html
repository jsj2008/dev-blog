<!DOCTYPE html>
<html>
<head>
	<title>share weixin js sdk</title>
	<meta name='viewpoint' content ="initial-scale=1.0;width=device-width" />
	<meta http-equiv="content" content='text/html;charset=utf-8' /> 
	<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
</head>
<body>
	{$name}
	<script>
		wx.config({
		    debug: true, 
		    appId: 'wx2708c404b0c52465', 
		    timestamp: '{$timestamp}', 
		    nonceStr: '{$noncestr}', 
		    signature: '{$signature}',
		    jsApiList: [
		    	'onMenuShareTimeline',
		    	'onMenuShareAppMessage',
		    	'chooseImage', 
		    	'scanQRCode',
		    ] 
		});

		wx.ready(function(){
			wx.onMenuShareTimeline({
			    title: 'test1', 
			    link: 'http://www.baidu.com', 
			    imgUrl: 'https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png', 
			    success: function () { 
			        alert('share success');
			    },
			    cancel: function () { 
			        alert('share failed');
			    }
			});
			wx.onMenuShareAppMessage({
			    title: 'test1', 
			    desc: 'test share', 
			    link: 'http://www.baidu.com', 
			    imgUrl: 'https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png',
			    type: 'link', 
			    dataUrl: '', 
			    success: function () { 
			        
			    },
			    cancel: function () { 
			        
			    }
			});
		});

		function showChooseImage() {
			wx.chooseImage({
			    count: 1, 
			    sizeType: ['original', 'compressed'], 
			    sourceType: ['album', 'camera'], 
			    success: function (res) {
			        var localIds = res.localIds; 
			    }
			});
		}

		function scanQRCode() {
			wx.scanQRCode({
			    needResult: 0, 
			    scanType: ["qrCode","barCode"], 
			    success: function (res) {
				    var result = res.resultStr;
				}
			});
		}

		wx.error(function(res){

		});
	</script>
	<button onclick='showChooseImage();'>showImage</button>
	<button onclick="scanQRCode();">scan</button>
</body>
</html> 